{% extends "base.html" %}
{% load django_bootstrap5 %}
{% block title %}
  My Tasks
{% endblock title %}
{% block content %}
  <main>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-md bg-dark navbar-dark py3 ">
      <div class="container">
        <a href="#" class="navbar-brand">My Tasks</a>
        <button class="navbar-toggler"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navmenu">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navmenu">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a href="" class="nav-link">Sign-In</a>
            </li>
            <li class="nav-item">
              <a href="" class="nav-link">Sign-Up</a>
            </li>
            <li class="nav-item">
              <a href="" class="nav-link">About</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Enter Task -->
    <section class="bg-dark text-light p-3 ">
      <div class="container ">
        <form method="post" action="." class="d-md-flex justify-content-center ">
          <div class="w-100 mx-auto mx-md-0">
            {% csrf_token %}
            {% bootstrap_form form show_label=False size="sm" wrapper_class="mb-0 pe-md-3" %}
          </div>
          <div class="d-flex d-md-block justify-content-center">
            {% bootstrap_button "Save" button_type="submit" button_class="btn-primary px-5 px-md-2 mt-2 mt-md-0" size="sm" %}
          </div>
        </form>
      </div>
    </section>
    <!-- Task List -->
    <section class="bg-dark text-light">
      <div class="container p-3">
        <h2 class="">Tasks</h2>
        <hr>
        {% if tasks.all %}
          {% for task in tasks %}
            {% if task.completed == False %}
              <div class="d-md-flex justify-content-between align-items-center border border-light p-2 mb-2 text-dark rounded-3 bg-light shadow-lg">
                <p class="my-auto pb-2 pb-md-0 text-break">{{ task.task }}</p>
                <div class="d-flex flex-row justify-content-end">
                  <a href="{% url 'mark_completed' task.id %}"
                     class="btn btn-success btn-sm me-2"
                     tabindex="-1"
                     role="button"
                     aria-disabled="true">Completed</a>
                  <a href="{% url 'delete' task.id %}"
                     class="btn btn-danger btn-sm"
                     tabindex="-1"
                     role="button"
                     aria-disabled="true">Delete</a>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        {% endif %}
      </div>
    </section>
    <!-- Task List completed -->
    <section class="bg-dark text-light">
      <div class="container p-3">
        <h2 class="">Completed Tasks</h2>
        <hr>
        {% if tasks.all %}
          {% for task in tasks %}
            {% if task.completed == True %}
              <div class="d-md-flex justify-content-between align-items-center border border-light p-2 mb-2 text-dark rounded-3 bg-light shadow-lg">
                <p class="my-auto pb-2 pb-md-0 text-break">
                  <s>{{ task.task }}</s>
                </p>
                <div class="d-flex flex-row justify-content-end">
                  <a href="{% url 'delete' task.id %}"
                     class="btn btn-danger btn-sm"
                     tabindex="-1"
                     role="button"
                     aria-disabled="true">Delete</a>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        {% endif %}
      </div>
    </section>
  </main>
{% endblock content %}
